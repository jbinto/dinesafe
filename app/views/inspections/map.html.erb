<%= javascript_include_tag("map") %>

<% content_for :head do %>
<script type="text/javascript">
  // Loads the Google Map API and runs callback function (init()) when done
  function loadScript() {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src = "http://maps.google.com/maps/api/js?v=3&sensor=true&callback=init";
    document.body.appendChild(script);

    // For iphone
    window.top.scrollTo(0, 1);
  }

  window.onload = loadScript;
</script>
<% end %>

<div id="map_canvas"></div>

<div id="controls">
<textarea id="output"></textarea>
<a href="#" id="show-hide-output" data-element="textarea#output">Show/Hide Output</a>
</div>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery.min.js">\x3C/script>')</script>

<script type="text/javascript">
// Event handlers related to non-map controls
$("#show-hide-output").live("click", function(){
var el = $(this).data("element");
var $el = $(el);
$el.toggle();
});
</script>
